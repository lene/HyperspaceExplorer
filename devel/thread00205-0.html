<html><head><title>Qt Interest Archive - RootWindow aka Desktop</title>
<style type="text/css">
<!--
h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
-->
</style>
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr bgcolor="#E5E5E5">
<td valign=center>
<a href="http://www.trolltech.com/">
<font color="#004faf">Trolltech Home</font></a> |
<a href="http://qt-interest.trolltech.com/"> 
<font color="#004faf">Qt-interest Home</font></a> |
<a href="recent-index-0.html">
<font color="#004faf">Recent Threads</font></a> |
<a href="thread-index-0.html">
<font color="#004faf">All Threads</font></a> |
<a href="author.html">
<font color="#004faf">Author</font></a> |
<a href="date.html">
<font color="#004faf">Date</font></a>
</td>
<td align="right" valign="center"><img src="/logo32.png" align="right" width="64" height="32" border="0"></td></tr>
<tr bgcolor="#E5E5E5">
<td valign=center colspan="2">
<a href="thread-index-1.html">All threads index page 2</a>
</tr>
</table><h1 align="center">Qt-interest Archive, November 1997<br>RootWindow aka Desktop</h1>

<hr>
<a name="msg00205">Message</a> 1 in thread<p>
<!-- MHonArc v2.5.2 -->
<!--X-Subject: RootWindow aka Desktop -->
<!--X-From-R13: Pnib Rr Dvqqre <onibNnpr.hylffvf.fghqrag.xhyrhira.np.or> -->
<!--X-Date: Fri, 28 Nov 1997 20:18:55 +0100 -->
<!--X-Message-Id: 19971128201725.14487@ace.ulyssis.student.kuleuven.ac.be -->
<!--X-Content-Type: multipart/signed -->
<!--X-Derived: pgp00000.pgp -->
<!--X-Head-End-->

<!--X-Body-Begin-->
<!--X-User-Header-->

<!--X-User-Header-End-->
<!--X-TopPNI-->


<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->

<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: RootWindow aka Desktop</li>
<li><em>From</em>: Bavo De Ridder &lt;<A HREF="mailto:bavo@DOMAIN.HIDDEN">bavo@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</A>&gt;</li>
<li><em>Date</em>: Fri, 28 Nov 1997 20:17:25 +0100</li>
<li><em>To</em>: <A HREF="mailto:qt-interest@DOMAIN.HIDDEN">qt-interest@xxxxxxxx</A></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<p>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hello,

I have the following question: Is it possible to have widgets on the
rootwidget?
I know how to make your own widget the root-widget an how to make your own
paintEvent method draw on the desktop (WFlags: WType_Desktop |
WPaintDesktop). But when I create a QPushButton on that widget... it is
created as a toplevelwidget... How can I prevent this... How can I make
the button to be part of the desktop...


Bavo De Ridder
</pre>
</pre>
<p><strong>Attachment:
<a href="pgp00000.pgp" ><tt>pgp00000.pgp</tt></a></strong><br>
<em>Description:</em> PGP signature</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->


<!--X-BotPNI-End-->
<!--X-User-Footer-->

<!--X-User-Footer-End-->

<a name="msg00207">Message</a> 2 in thread<p>
<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: RootWindow aka Desktop -->
<!--X-From-R13: zfunexrlNfbsgnep.pbz ([vxr Eunexrl) -->
<!--X-Date: Sat, 29 Nov 1997 00:39:19 +0100 -->
<!--X-Message-Id: fc.000086e9008dde2f3b9aca00882a507f.8dde44@softarc.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->

<!--X-Body-Begin-->
<!--X-User-Header-->

<!--X-User-Header-End-->
<!--X-TopPNI-->


<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->

<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re: RootWindow aka Desktop</li>
<li><em>From</em>: <A HREF="mailto:msharkey@DOMAIN.HIDDEN">msharkey@xxxxxxxxxxx</A> (Mike Sharkey)</li>
<li><em>Date</em>: Fri, 28 Nov 1997 18:38:26 +0000</li>
<li><em>Cc</em>: <A HREF="mailto:qt-interest@DOMAIN.HIDDEN">qt-interest@xxxxxxxx</A></li>
<li><em>Priority</em>: normal</li>
<li><em>To</em>: <A HREF="mailto:bavo@DOMAIN.HIDDEN">bavo@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</A></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<p>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
bavo@ace.ulyssis.student.kuleuven.ac.be,Internet writes:
&gt;Hello,
&gt;
&gt;I have the following question: Is it possible to have widgets on the
&gt;rootwidget?
&gt;I know how to make your own widget the root-widget an how to make your own
&gt;paintEvent method draw on the desktop (WFlags: WType_Desktop |
&gt;WPaintDesktop). But when I create a QPushButton on that widget... it is
&gt;created as a toplevelwidget... How can I prevent this... How can I make
&gt;the button to be part of the desktop...
&gt;
&gt;
&gt;Bavo De Ridder
&gt;
The following code describes a quick and dirty way to accomplish this. I've
made it real simple for clarity, but in reality, you probably want to do the
pButton-&gt;lower() call(s) on a millisecond timer so you can do gApp-&gt;exec()
instead of going into a tight loop with gApp-&gt;processEvents() so that your
application will block and thus not use so much CPU....

This is the only way I can figure to do it without rewriting parts of Qt lib,
it just dosn't like to do what you're suggesting, perhaps by design?

Anyway, cheers!

Mike Sharkey
X11 Development
SoftArc Inc.
<A  HREF="http://www.softarc.com/~msharkey">http://www.softarc.com/~msharkey</A>

-------clipity clip--------------

&gt;
&gt;------- root.h (moc this file to root_moc.h) -----

#include &lt;qt/include/qpushbt.h&gt;

class QDesktopPushButton : public QPushButton {
Q_OBJECT
public:
		QDesktopPushButton(const char *text,QWidget *parent);
		~QDesktopPushButton();
};

-------- root.cpp ---------

#include &lt;qt/include/qapp.h&gt;
#include &lt;qt/include/qpushbt.h&gt;
#include &quot;root_moc.h&quot;

QApplication	*gApp=NULL;

QDesktopPushButton::QDesktopPushButton(const char *text,QWidget *parent) :
		QPushButton(text,parent)
{
	recreate(parentWidget()-&gt;parentWidget(),
                     
WStyle_Customize|WStyle_NoBorder|WStyle_Tool,QPoint(0,0),TRUE);
}

QDesktopPushButton::~QDesktopPushButton()
{
}

void main(int argc,char *argv[])
{
	gApp = new QApplication(argc,argv);
	QWidget	    		*pDesktop = QApplication::desktop();	
	QDesktopPushButton	 *pButton = new 
                                             QDesktopPushButton(&quot;Push
Me&quot;,pDesktop);

	pDesktop-&gt;setBackgroundColor(white);
	pButton-&gt;move(100,100);
	while(1) {
		pButton-&gt;lower();
		gApp-&gt;processEvents();
	}
}


&gt;
&gt;

</pre>
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->


<!--X-BotPNI-End-->
<!--X-User-Footer-->

<!--X-User-Footer-End-->

<a name="msg00210">Message</a> 3 in thread<p>
<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: RootWindow aka Desktop -->
<!--X-From-R13: "Rnavry Ebynm" <qfbynmNfvfgrypbz.pbz> -->
<!--X-Date: Sat, 29 Nov 1997 15:54:53 +0100 -->
<!--X-Message-Id: 347F9826.F766BBCA@sistelcom.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: fc.000086e9008dde2f3b9aca00882a507f.8dde44@softarc.com -->
<!--X-Head-End-->

<!--X-Body-Begin-->
<!--X-User-Header-->

<!--X-User-Header-End-->
<!--X-TopPNI-->


<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->

<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re: RootWindow aka Desktop</li>
<li><em>From</em>: &quot;Daniel Solaz&quot; &lt;<A HREF="mailto:dsolaz@DOMAIN.HIDDEN">dsolaz@xxxxxxxxxxxxx</A>&gt;</li>
<li><em>Date</em>: Sat, 29 Nov 1997 04:20:54 +0000</li>
<li><em>Organization</em>: (setq dsolaz NIL)</li>
<li><em>Sender</em>: &quot;&quot; &lt;<A HREF="mailto:dsolaz@DOMAIN.HIDDEN">dsolaz@xxxxxxxxxxxxx</A>&gt;</li>
<li><em>To</em>: <A HREF="mailto:qt-interest@DOMAIN.HIDDEN">qt-interest@xxxxxxxx</A></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<p>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Mike Sharkey wrote:
&gt;bavo@ace.ulyssis.student.kuleuven.ac.be,Internet writes:
&gt;&gt;I know how to make your own widget the root-widget an how to make your own
&gt;&gt;paintEvent method draw on the desktop (WFlags: WType_Desktop |
&gt;&gt;WPaintDesktop). But when I create a QPushButton on that widget... it is
&gt;&gt;created as a toplevelwidget... How can I prevent this... How can I make
&gt;&gt;the button to be part of the desktop...
&gt;The following code describes a quick and dirty way to accomplish this. I've
&gt;made it real simple for clarity, but in reality, you probably want to do the
&gt;pButton-&gt;lower() call(s) on a millisecond timer so you can do gApp-&gt;exec()
&gt;instead of going into a tight loop with gApp-&gt;processEvents() so that your
&gt;application will block and thus not use so much CPU....
&gt;This is the only way I can figure to do it without rewriting parts of Qt lib,
&gt;it just dosn't like to do what you're suggesting, perhaps by design?
And I thought it was the WM that gave a frame to any window whose parent
is the desktop... maybe I won't have to modify it?
I had tried putting widgets on the desktop, getting top-level windows. I
was stuck. But, before even testing it, this technique of calling
lower() again and again seems... yes, quick and dirty.
Will the button flicker? Will the WM get confused with this window that
lowers itself constantly?
It would be very nice to have the desktop contain other widgets. Right
now the X11 desktop only serves for storing properties and I would like
it to be more 'active'. Not the Microsoft way, which I have never tried,
but the OS/2 way. React to mouse events. Pop up menus. Contain icons.
This would be on my wishlist for 1.4, really.
-Daniel

</pre>
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->


<!--X-BotPNI-End-->
<!--X-User-Footer-->

<!--X-User-Footer-End-->

