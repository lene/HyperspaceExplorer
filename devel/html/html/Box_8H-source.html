<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>HyperspaceExplorer: HyperspaceExplorer/src/Balls/Box.H Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_4d15fdf8e4b2ca29393070d0b99c6a43.html">HyperspaceExplorer</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4faa746cd9dc8a4df9726effa8d3d373.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_0d361becd16e86c92df916e52ece1aa1.html">Balls</a>
  </div>
</div>
<div class="contents">
<h1>Box.H</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="preprocessor">#if (!defined BOX_H)</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define BOX_H</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "Ball.H"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "Matrix.H"</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="keyword">extern</span> <span class="keywordtype">double</span> &amp;rot_xw, &amp;rot_yw, &amp;rot_zw,
<a name="l00009"></a>00009               &amp;drot_xw,&amp;drot_yw,&amp;drot_zw,
<a name="l00010"></a>00010               &amp;rot_xyz, &amp;rot_xyw, &amp;rot_xzw, &amp;rot_yzw,
<a name="l00011"></a>00011               &amp;drot_xyz,&amp;drot_xyw,&amp;drot_xzw,&amp;drot_yzw;
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="keyword">extern</span> <span class="keywordtype">double</span> rot[][8], drot[][8];
<a name="l00014"></a>00014 
<a name="l00016"></a><a class="code" href="classBoxBase.html">00016</a> <span class="keyword">class </span><a class="code" href="classBoxBase.html" title="Base class and interface for a Box of any dimension.">BoxBase</a> {
<a name="l00017"></a>00017 <span class="keyword">public</span>:
<a name="l00018"></a>00018   <a class="code" href="classBoxBase.html" title="Base class and interface for a Box of any dimension.">BoxBase</a> ();
<a name="l00019"></a>00019   <span class="keyword">virtual</span> ~<a class="code" href="classBoxBase.html" title="Base class and interface for a Box of any dimension.">BoxBase</a> () { };
<a name="l00020"></a>00020 
<a name="l00022"></a><a class="code" href="classBoxBase.html#cbd409655c424e7eae7b2c5b22de3821">00022</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#cbd409655c424e7eae7b2c5b22de3821" title="Set friction for collisions.">setFriction</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_f) { <a class="code" href="classBoxBase.html#476fc3f769b3a4d04ac8aed5b16bcaa2">friction</a> = _f; }
<a name="l00024"></a><a class="code" href="classBoxBase.html#ed14990b09aefc1f270192a59187eb4e">00024</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#ed14990b09aefc1f270192a59187eb4e">getFriction</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#476fc3f769b3a4d04ac8aed5b16bcaa2">friction</a>; }
<a name="l00026"></a><a class="code" href="classBoxBase.html#043fa1d3d03a1109ea75ca9cf60375f0">00026</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#043fa1d3d03a1109ea75ca9cf60375f0" title="Set elasticity for collisions.">setElasticity</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_e) { <a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">elasticity</a> = _e;}
<a name="l00028"></a><a class="code" href="classBoxBase.html#52f470f3fa61aca7ed94ab84f6d891f6">00028</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#52f470f3fa61aca7ed94ab84f6d891f6">getElasticity</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">elasticity</a>; }
<a name="l00030"></a><a class="code" href="classBoxBase.html#f2ff7210ef2a9333263217c5c7359b89">00030</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#f2ff7210ef2a9333263217c5c7359b89" title="Set gravitation.">setGravitation</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_g) { <a class="code" href="classBoxBase.html#64d261e12d2cecf942a718daba72ef39">gravity</a> = _g; }
<a name="l00032"></a><a class="code" href="classBoxBase.html#0339c214edaa11db854eb9f62e264388">00032</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#0339c214edaa11db854eb9f62e264388">getGravitation</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#64d261e12d2cecf942a718daba72ef39">gravity</a>; }
<a name="l00034"></a><a class="code" href="classBoxBase.html#c22cc2d198e721676599d1f7af60e1ab">00034</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#c22cc2d198e721676599d1f7af60e1ab">setRMax</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_g) { <a class="code" href="classBallBase.html#964b801c98d65938753712274ab1bf54">BallBase::setRMax</a> (_g); }
<a name="l00036"></a><a class="code" href="classBoxBase.html#4ee1d94882c63a86e12be981c4f95188">00036</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#4ee1d94882c63a86e12be981c4f95188">getRMax</a> () { <span class="keywordflow">return</span> <a class="code" href="classBallBase.html#eb1098fd760b1a6157e3c26df656c2f6">BallBase::getRMax</a> (); }
<a name="l00038"></a><a class="code" href="classBoxBase.html#6d005a15a174073d4a9e33aa68254798">00038</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#6d005a15a174073d4a9e33aa68254798">setMaxT</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_t) {
<a name="l00039"></a>00039     <a class="code" href="classBoxBase.html#ce96fd9692a3780a5317df92bd8e1e35">max_t</a> = _t;
<a name="l00040"></a>00040     <span class="keywordflow">if</span> (_t &lt;= 0) <a class="code" href="classBoxBase.html#ce96fd9692a3780a5317df92bd8e1e35">max_t</a> = 1e310;
<a name="l00041"></a>00041   }
<a name="l00043"></a><a class="code" href="classBoxBase.html#4daf1ef0d6d2059bd1dac86263a80db9">00043</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#4daf1ef0d6d2059bd1dac86263a80db9">getMaxT</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#ce96fd9692a3780a5317df92bd8e1e35">max_t</a>; }
<a name="l00045"></a><a class="code" href="classBoxBase.html#673877917b76f0b07c58c3a0394a8b49">00045</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#673877917b76f0b07c58c3a0394a8b49">setSloppy</a> (<span class="keywordtype">bool</span> _s) { <a class="code" href="classBoxBase.html#d6a3e4dfce2842476fb3930678e8afcb">sloppy</a> = _s; }
<a name="l00047"></a><a class="code" href="classBoxBase.html#af14013d452b89218b65f831614bdb3d">00047</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#af14013d452b89218b65f831614bdb3d">getSloppy</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#d6a3e4dfce2842476fb3930678e8afcb">sloppy</a>; }
<a name="l00049"></a><a class="code" href="classBoxBase.html#6f362f46e3af013e2c1def8713521f85">00049</a>   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#6f362f46e3af013e2c1def8713521f85">setRndSize</a> (<span class="keywordtype">bool</span> r) { <a class="code" href="classBallBase.html#8b785e66e50b303b44b4c832224218c6">BallBase::setRandomSize</a> (r); }
<a name="l00051"></a><a class="code" href="classBoxBase.html#858ee4490bebaa1bb851c450b1e5063f">00051</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#858ee4490bebaa1bb851c450b1e5063f">getRndSize</a> () { <span class="keywordflow">return</span> <a class="code" href="classBallBase.html#904c4e411f5b22d3f0b57d8eea3f0dd7">BallBase::getRandomSize</a> (); }
<a name="l00052"></a>00052 
<a name="l00054"></a>00054   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#0cfcb5a195ebbbd76eea8b1805f67823">draw</a>() = 0;
<a name="l00056"></a>00056   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#510d799c8bb25e10b145bb56efd7436e">step</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;) = 0;
<a name="l00057"></a>00057 
<a name="l00059"></a>00059   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#2be225eb31da177c9852df837adfb681">setNumBalls</a> (<span class="keywordtype">unsigned</span>) = 0;
<a name="l00061"></a>00061   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <a class="code" href="classBoxBase.html#09e4a6dc908c4128e5da9879eb0d3a0a">getNumBalls</a> () = 0;
<a name="l00062"></a>00062 
<a name="l00064"></a>00064   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#f097a05960da506fed4087f192caafe8">setXCam</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;) = 0;
<a name="l00066"></a>00066   <span class="keyword">virtual</span> <span class="keywordtype">double</span> *<a class="code" href="classBoxBase.html#15a8d6486e059ae4650b9e8d0646e1dd">getXCam</a> () = 0;
<a name="l00068"></a>00068   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <a class="code" href="classBoxBase.html#59009cbb7c30e0c126cc3720db9ffd32">getDimension</a> () = 0;
<a name="l00069"></a>00069 
<a name="l00071"></a><a class="code" href="classBoxBase.html#32245a2a7f85eb2161e8933758a9d524">00071</a>   <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#32245a2a7f85eb2161e8933758a9d524">getT</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">t</a>; }
<a name="l00073"></a><a class="code" href="classBoxBase.html#147f6c16aa8d4306a76a63148632d40f">00073</a>   <span class="keywordtype">unsigned</span> <a class="code" href="classBoxBase.html#147f6c16aa8d4306a76a63148632d40f">getCollisions</a> () { <span class="keywordflow">return</span> <a class="code" href="classBoxBase.html#36d462827a6063c791ad32a62b058ae6">num_collisions</a>; }
<a name="l00074"></a>00074 
<a name="l00076"></a><a class="code" href="classBoxBase.html#53db3ffabcfc2d8441b9a9941f79e387">00076</a>   <span class="keywordtype">void</span> <a class="code" href="classBoxBase.html#53db3ffabcfc2d8441b9a9941f79e387">setRotation</a> (<span class="keywordtype">unsigned</span> axis1, <span class="keywordtype">unsigned</span> axis2, <span class="keywordtype">double</span> phi) {
<a name="l00077"></a>00077     drot[axis2-1][axis1] = phi;
<a name="l00078"></a>00078   }
<a name="l00080"></a><a class="code" href="classBoxBase.html#9dd4ead04a097f91672c6fac66e19890">00080</a>   <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#9dd4ead04a097f91672c6fac66e19890">getRotation</a> (<span class="keywordtype">unsigned</span> axis1, <span class="keywordtype">unsigned</span> axis2) {
<a name="l00081"></a>00081     <span class="keywordflow">return</span> drot[axis2-1][axis1];
<a name="l00082"></a>00082   }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="keyword">protected</span>:
<a name="l00086"></a><a class="code" href="classBoxBase.html#36d462827a6063c791ad32a62b058ae6">00086</a>   <span class="keywordtype">unsigned</span> <a class="code" href="classBoxBase.html#36d462827a6063c791ad32a62b058ae6">num_collisions</a>;
<a name="l00088"></a><a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">00088</a>   <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">t</a>;
<a name="l00089"></a>00089 
<a name="l00091"></a><a class="code" href="classBoxBase.html#ce96fd9692a3780a5317df92bd8e1e35">00091</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#ce96fd9692a3780a5317df92bd8e1e35">max_t</a>;
<a name="l00093"></a><a class="code" href="classBoxBase.html#476fc3f769b3a4d04ac8aed5b16bcaa2">00093</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#476fc3f769b3a4d04ac8aed5b16bcaa2">friction</a>;
<a name="l00095"></a><a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">00095</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">elasticity</a>;
<a name="l00097"></a><a class="code" href="classBoxBase.html#64d261e12d2cecf942a718daba72ef39">00097</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBoxBase.html#64d261e12d2cecf942a718daba72ef39">gravity</a>;
<a name="l00098"></a>00098 
<a name="l00100"></a><a class="code" href="classBoxBase.html#d6a3e4dfce2842476fb3930678e8afcb">00100</a>   <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classBoxBase.html#d6a3e4dfce2842476fb3930678e8afcb">sloppy</a>;
<a name="l00101"></a>00101 };
<a name="l00102"></a>00102 
<a name="l00104"></a><a class="code" href="classBox.html">00104</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keyword">class </span><a class="code" href="classBox.html" title="Hypercube of dimension D, which contains a number of Balls.">Box</a>: <span class="keyword">public</span> <a class="code" href="classBoxBase.html" title="Base class and interface for a Box of any dimension.">BoxBase</a> {
<a name="l00105"></a>00105 <span class="keyword">public</span>:
<a name="l00107"></a>00107   <a class="code" href="classBox.html#02da8731bfa65e5decacabc6f79da94e">Box</a> (<span class="keywordtype">unsigned</span> n = 1);
<a name="l00108"></a>00108   <span class="keyword">virtual</span> ~<a class="code" href="classBox.html" title="Hypercube of dimension D, which contains a number of Balls.">Box</a> () { };
<a name="l00109"></a>00109 
<a name="l00111"></a>00111   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBox.html#ff832bd372698073893d1ea171ff70b9">draw</a>();
<a name="l00113"></a>00113   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBox.html#65754f3289ea9e876ddce30a00917ea1">step</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;dt);
<a name="l00114"></a>00114 
<a name="l00116"></a>00116   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBox.html#a136521ef67ae0b773ee2c7edc2da191">setNumBalls</a> (<span class="keywordtype">unsigned</span> n);
<a name="l00118"></a><a class="code" href="classBox.html#d4dbda6e2ba8a7a2f30ac4bf4d551185">00118</a>   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <a class="code" href="classBox.html#d4dbda6e2ba8a7a2f30ac4bf4d551185">getNumBalls</a> () { <span class="keywordflow">return</span> <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> (); }
<a name="l00119"></a>00119 
<a name="l00121"></a><a class="code" href="classBox.html#689e0672830117f9bb1748e08ac51085">00121</a>   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <a class="code" href="classBox.html#689e0672830117f9bb1748e08ac51085">getDimension</a> () { <span class="keywordflow">return</span> D; }
<a name="l00122"></a>00122 
<a name="l00124"></a><a class="code" href="classBox.html#77ad121969e41ce7f05c2307edacdfe5">00124</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBox.html#77ad121969e41ce7f05c2307edacdfe5">setXCam</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_Xcam) {
<a name="l00125"></a>00125     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; D; <a class="code" href="classBox.html#58f335bb3f51a5467f9367ddde445615">Xcam</a>[i++] = -_Xcam);
<a name="l00126"></a>00126   }
<a name="l00128"></a><a class="code" href="classBox.html#65f09cb49c9819d60223f5443024a4e9">00128</a>   <span class="keyword">virtual</span> <span class="keywordtype">double</span> *<a class="code" href="classBox.html#65f09cb49c9819d60223f5443024a4e9">getXCam</a> () { <span class="keywordflow">return</span> <a class="code" href="classBox.html#58f335bb3f51a5467f9367ddde445615">Xcam</a>; }
<a name="l00129"></a>00129 
<a name="l00131"></a>00131   <span class="keyword">static</span> Vec&lt;D&gt; <a class="code" href="classBox.html#06ba4612f475637b3c9680e432ed492d">project</a> (<span class="keywordtype">unsigned</span> d,
<a name="l00132"></a>00132                          <span class="keyword">const</span> Vec&lt;D&gt; &amp;X, <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;r,
<a name="l00133"></a>00133                          Vec&lt;D&gt; &amp;Xproj, <span class="keywordtype">double</span> &amp;rproj);
<a name="l00134"></a>00134 
<a name="l00136"></a><a class="code" href="classBox.html#13c56822784393dd9804e94f2017e348">00136</a>   <span class="keyword">static</span> Vec&lt;D&gt; <a class="code" href="classBox.html#13c56822784393dd9804e94f2017e348">vertices</a>[1 &lt;&lt; D];
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="keyword">protected</span>:
<a name="l00140"></a>00140   <a class="code" href="classBall.html" title="Bouncing spheres template.">Ball&lt;D&gt;</a> *<a class="code" href="classBox.html#78d963988298e494ee403d98ab751253">makeBall</a> ();
<a name="l00142"></a>00142   <span class="keywordtype">void</span> <a class="code" href="classBox.html#69c7ae609b142781cccab64acf1834e8">addBall</a> ();
<a name="l00144"></a>00144   <span class="keywordtype">void</span> <a class="code" href="classBox.html#1072175c8bd531d478939d1689f4efbe">deleteBall</a> ();
<a name="l00146"></a>00146   <span class="keywordtype">void</span> <a class="code" href="classBox.html#08139f05664f432fcc1efb3d5eb3eefb">collide</a> (Vec&lt;D&gt; &amp;, Vec&lt;D&gt; &amp;, Vec&lt;D&gt; &amp;,
<a name="l00147"></a>00147                 <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;, <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;);
<a name="l00149"></a>00149   <span class="keywordtype">void</span> <a class="code" href="classBox.html#cbba9e3f29c76d958e0a42326fdf6d26">rotate</a> (Vec&lt;D&gt; [1&lt;&lt;D]);
<a name="l00151"></a>00151   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classBox.html#1dd3c5bd4be122b210b4566b77d5ebd6">DefineHypercube</a> ();
<a name="l00152"></a>00152 
<a name="l00154"></a><a class="code" href="classBox.html#10784b09ce947482d20fd4267d523bbb">00154</a>   Vec&lt;D&gt; <a class="code" href="classBox.html#10784b09ce947482d20fd4267d523bbb">Xmin</a>;
<a name="l00156"></a><a class="code" href="classBox.html#d575af2ca5351d88bbf1905c01e1776b">00156</a>   Vec&lt;D&gt; <a class="code" href="classBox.html#d575af2ca5351d88bbf1905c01e1776b">Xmax</a>;
<a name="l00158"></a><a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">00158</a>   <a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html" title="STL class.">vector&lt;Ball&lt;D&gt;</a> *&gt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>;
<a name="l00159"></a>00159 
<a name="l00161"></a><a class="code" href="classBox.html#5767c2d1852c9a743c9db6d605e7646e">00161</a>   <span class="keyword">static</span> Vec&lt;D&gt;   <a class="code" href="classBox.html#5767c2d1852c9a743c9db6d605e7646e">vtrans</a>[1 &lt;&lt; D];
<a name="l00163"></a><a class="code" href="classBox.html#cf91db4d9fe026bed099e7f803ec01c9">00163</a>   <span class="keyword">static</span> matrix&lt;D&gt; <a class="code" href="classBox.html#cf91db4d9fe026bed099e7f803ec01c9">R</a>;
<a name="l00165"></a><a class="code" href="classBox.html#58f335bb3f51a5467f9367ddde445615">00165</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classBox.html#58f335bb3f51a5467f9367ddde445615">Xcam</a>[D];
<a name="l00166"></a>00166 };
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="classBox.html#cbba9e3f29c76d958e0a42326fdf6d26">00168</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#cbba9e3f29c76d958e0a42326fdf6d26">Box&lt;D&gt;::rotate</a> (Vec&lt;D&gt; vtrans[1&lt;&lt;D]) {
<a name="l00169"></a>00169   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i &lt; D; i++)
<a name="l00170"></a>00170     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; i; j++)
<a name="l00171"></a>00171       rot[i-1][j] = drot[i-1][j]*<a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">t</a>;
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordflow">if</span> (D &gt; 3) <a class="code" href="classBox.html#cf91db4d9fe026bed099e7f803ec01c9">R</a> = matrix&lt;D&gt; ();
<a name="l00174"></a>00174   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 3; i &lt; D; i++)
<a name="l00175"></a>00175     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; i; j++) {
<a name="l00176"></a>00176       rot[i-1][j] = drot[i-1][j]*<a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">t</a>;
<a name="l00177"></a>00177       <a class="code" href="classBox.html#cf91db4d9fe026bed099e7f803ec01c9">R</a> = <a class="code" href="classBox.html#cf91db4d9fe026bed099e7f803ec01c9">R</a>*matrix&lt;D&gt; (j, i, rot[i-1][j]);
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="classBox.html#02da8731bfa65e5decacabc6f79da94e">00181</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <a class="code" href="classBox.html#02da8731bfa65e5decacabc6f79da94e">Box&lt;D&gt;::Box</a> (<span class="keywordtype">unsigned</span> n):
<a name="l00182"></a>00182     <a class="code" href="classBoxBase.html" title="Base class and interface for a Box of any dimension.">BoxBase</a> (),
<a name="l00183"></a>00183     <a class="code" href="classBox.html#10784b09ce947482d20fd4267d523bbb">Xmin</a> (), <a class="code" href="classBox.html#d575af2ca5351d88bbf1905c01e1776b">Xmax</a> (),
<a name="l00184"></a>00184     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a> () {
<a name="l00185"></a>00185   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; D; i++) {
<a name="l00186"></a>00186     <a class="code" href="classBox.html#10784b09ce947482d20fd4267d523bbb">Xmin</a>[i]= -1.; <a class="code" href="classBox.html#d575af2ca5351d88bbf1905c01e1776b">Xmax</a>[i] = 1.;
<a name="l00187"></a>00187   }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <a class="code" href="classBox.html#1dd3c5bd4be122b210b4566b77d5ebd6">DefineHypercube</a> ();
<a name="l00190"></a>00190   DrawHypercube (D, <a class="code" href="classBox.html#13c56822784393dd9804e94f2017e348">vertices</a>);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <a class="code" href="classBox.html#a136521ef67ae0b773ee2c7edc2da191">setNumBalls</a> (n);
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 
<a name="l00195"></a><a class="code" href="classBox.html#78d963988298e494ee403d98ab751253">00195</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <a class="code" href="classBall.html" title="Bouncing spheres template.">Ball&lt;D&gt;</a> *<a class="code" href="classBox.html#78d963988298e494ee403d98ab751253">Box&lt;D&gt;::makeBall</a> () {
<a name="l00196"></a>00196   <a class="code" href="classBall.html" title="Bouncing spheres template.">Ball&lt;D&gt;</a> *tmp = <span class="keyword">new</span> <a class="code" href="classBall.html" title="Bouncing spheres template.">Ball&lt;D&gt;</a>;
<a name="l00197"></a>00197   <span class="keywordtype">bool</span> touched = <span class="keyword">true</span>;
<a name="l00198"></a>00198   <span class="keywordflow">while</span> (touched) {
<a name="l00199"></a>00199     touched = <span class="keyword">false</span>;
<a name="l00200"></a>00200     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> (); j++)
<a name="l00201"></a>00201       <span class="keywordflow">if</span> (touch (*<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[j], *tmp, tmp-&gt;<a class="code" href="classBallBase.html#743668d2abdd4c9e9e90712a89ec026e">r</a>))
<a name="l00202"></a>00202     touched = <span class="keyword">true</span>;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordflow">if</span> (touched) {
<a name="l00205"></a>00205       <span class="keyword">delete</span> tmp; tmp = <span class="keyword">new</span> <a class="code" href="classBall.html" title="Bouncing spheres template.">Ball&lt;D&gt;</a>; }
<a name="l00206"></a>00206   }
<a name="l00207"></a>00207   <span class="keywordflow">return</span> tmp;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="classBox.html#69c7ae609b142781cccab64acf1834e8">00210</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#69c7ae609b142781cccab64acf1834e8">Box&lt;D&gt;::addBall</a> () {
<a name="l00211"></a>00211   <a class="code" href="classBall.html" title="Bouncing spheres template.">Ball&lt;D&gt;</a> *tmp = <a class="code" href="classBox.html#78d963988298e494ee403d98ab751253">makeBall</a> ();
<a name="l00212"></a>00212   <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#46ff71bb6fd1bab7b6dc210bf40c57ce">push_back</a> (tmp);
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="classBox.html#1072175c8bd531d478939d1689f4efbe">00215</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#1072175c8bd531d478939d1689f4efbe">Box&lt;D&gt;::deleteBall</a> () {
<a name="l00216"></a>00216   <span class="keywordflow">if</span> (<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> ()]) {
<a name="l00217"></a>00217     <span class="keyword">delete</span> <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> ()];
<a name="l00218"></a>00218     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> ()] = 0;
<a name="l00219"></a>00219   }
<a name="l00220"></a>00220   <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#f98b901035d899f17415189b040dd018">pop_back</a> ();
<a name="l00221"></a>00221   <span class="comment">//  cerr &lt;&lt; "D " &lt;&lt; balls.size ()&lt;&lt; " ";</span>
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="classBox.html#a136521ef67ae0b773ee2c7edc2da191">00224</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#a136521ef67ae0b773ee2c7edc2da191">Box&lt;D&gt;::setNumBalls</a> (<span class="keywordtype">unsigned</span> newnum) {
<a name="l00225"></a>00225   <span class="comment">//  cerr &lt;&lt; "S&lt;"&lt;&lt;D&lt;&lt;"&gt;: " &lt;&lt; balls.size ()&lt;&lt; " -&gt; " &lt;&lt; newnum &lt;&lt; " ";</span>
<a name="l00226"></a>00226   <span class="keywordflow">if</span> (newnum &gt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> ())
<a name="l00227"></a>00227     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> (); i &lt; newnum; i++)
<a name="l00228"></a>00228       <a class="code" href="classBox.html#69c7ae609b142781cccab64acf1834e8">addBall</a> ();
<a name="l00229"></a>00229   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (newnum &lt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> ())
<a name="l00230"></a>00230     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a> (); i &gt; newnum; i--)
<a name="l00231"></a>00231       <a class="code" href="classBox.html#1072175c8bd531d478939d1689f4efbe">deleteBall</a> ();
<a name="l00232"></a>00232   <span class="keywordflow">else</span> { <span class="comment">/* nothing to be done */</span> }
<a name="l00233"></a>00233 }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt;
<a name="l00237"></a><a class="code" href="classBox.html#08139f05664f432fcc1efb3d5eb3eefb">00237</a>   <span class="keywordtype">void</span> <a class="code" href="classBox.html#08139f05664f432fcc1efb3d5eb3eefb">Box&lt;D&gt;::collide</a> (Vec&lt;D&gt; &amp;v1, Vec&lt;D&gt; &amp;v2,
<a name="l00238"></a>00238             Vec&lt;D&gt; &amp;dx,
<a name="l00239"></a>00239             <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;m1, <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;m2) {
<a name="l00240"></a>00240   <span class="keywordflow">if</span> ((v1-v2).sqnorm() == 0) <span class="keywordflow">return</span>;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   Vec&lt;D&gt; dxunity = dx.normalize ();
<a name="l00243"></a>00243   <span class="keywordtype">double</span> cosa1 = dxunity*v1, cosa2 = dxunity*v2;
<a name="l00244"></a>00244   Vec&lt;D&gt; v1rad = dxunity*cosa1, v2rad = dxunity*cosa2,
<a name="l00245"></a>00245                  v1tan = v1 - v1rad, v2tan = v2 - v2rad,
<a name="l00246"></a>00246                  vcm = (v1rad*m1+v2rad*m2)/(m1+m2),
<a name="l00247"></a>00247                  p1rad = (v1rad-vcm)*m1,
<a name="l00248"></a>00248                  v1rad_ = vcm - p1rad/m1*<a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">elasticity</a>,
<a name="l00249"></a>00249                  v2rad_ = vcm + p1rad/m2*elasticity;
<a name="l00250"></a>00250   v1 = v1rad_+v1tan;
<a name="l00251"></a>00251   v2 = v2rad_+v2tan;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="classBox.html#65754f3289ea9e876ddce30a00917ea1">00254</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#65754f3289ea9e876ddce30a00917ea1">Box&lt;D&gt;::step</a> (<span class="keyword">const</span> <span class="keywordtype">double</span> &amp;dt) {
<a name="l00255"></a>00255   <a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">t</a> += dt; <span class="keywordflow">if</span> (<a class="code" href="classBoxBase.html#10384f031d39647620ed935be6cc23d3">t</a> &gt;= <a class="code" href="classBoxBase.html#ce96fd9692a3780a5317df92bd8e1e35">max_t</a>) {
<a name="l00256"></a>00256     <a class="codeRef" doxygen="libstdc++.tag:" href="a01815.html#a254869c6a5188f3c0c4b3af7a853144">cout</a> &lt;&lt; <a class="code" href="classBoxBase.html#36d462827a6063c791ad32a62b058ae6">num_collisions</a>&lt;&lt; <a class="codeRef" doxygen="libstdc++.tag:" href="a01815.html#10ebe236b3a6e1c3f67686162aa3e7ce">endl</a>;
<a name="l00257"></a>00257     <a class="codeRef" doxygen="libstdc++.tag:" href="a01815.html#2107b37641fcd1f3d16ecc9c0a18041f">exit</a> (0);
<a name="l00258"></a>00258   }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260   <span class="comment">//  cerr &lt;&lt; balls.size () &lt;&lt; endl;</span>
<a name="l00261"></a>00261   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a>(); i++) {
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = i+1; j &lt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a>(); j++)
<a name="l00264"></a>00264       <span class="keywordflow">if</span> (touch (*<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i], *<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[j])) {
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="keywordtype">double</span> &amp;m1 = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;m, &amp;m2 = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[j]-&gt;m;
<a name="l00267"></a>00267     Vec&lt;D&gt; &amp;v1 = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;v, &amp;v2 = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[j]-&gt;v;
<a name="l00268"></a>00268     <span class="keywordflow">if</span> (!<a class="code" href="classBoxBase.html#d6a3e4dfce2842476fb3930678e8afcb">sloppy</a>) {
<a name="l00269"></a>00269       Vec&lt;D&gt; dx = <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;x - <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[j]-&gt;x;
<a name="l00270"></a>00270       <a class="code" href="classBox.html#08139f05664f432fcc1efb3d5eb3eefb">collide</a> (v1, v2, dx, m1, m2);
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272     <span class="keywordflow">else</span> {
<a name="l00273"></a>00273       Vec&lt;D&gt; vcm = (v1*m1+v2*m2)/(m1+m2),
<a name="l00274"></a>00274              p1 = (v1-vcm)*m1;  <span class="comment">//  = p2 =(v2rad-vcm)*m2,</span>
<a name="l00275"></a>00275       v1 = vcm - p1*<a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">elasticity</a>/m1, v2 = vcm + p1*<a class="code" href="classBoxBase.html#72a2b4a8f78d270110ba2de64c999d7c">elasticity</a>/m2; <span class="comment">// - p2/m2;</span>
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;step (dt); <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[j]-&gt;step (dt);
<a name="l00279"></a>00279     <a class="code" href="classBoxBase.html#36d462827a6063c791ad32a62b058ae6">num_collisions</a>++;
<a name="l00280"></a>00280       }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; D; k++) {
<a name="l00283"></a>00283       <span class="keywordflow">if</span> (<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;x[k] &lt;= <a class="code" href="classBox.html#10784b09ce947482d20fd4267d523bbb">Xmin</a>[k]+<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;r) {
<a name="l00284"></a>00284     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;x[k] = <a class="code" href="classBox.html#10784b09ce947482d20fd4267d523bbb">Xmin</a>[k]+<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;r;
<a name="l00285"></a>00285     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;v[k] = -<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;v[k]*(1-<a class="code" href="classBoxBase.html#476fc3f769b3a4d04ac8aed5b16bcaa2">friction</a>);
<a name="l00286"></a>00286       }
<a name="l00287"></a>00287       <span class="keywordflow">if</span> (<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;x[k] &gt;= <a class="code" href="classBox.html#d575af2ca5351d88bbf1905c01e1776b">Xmax</a>[k]-<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;r) {
<a name="l00288"></a>00288     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;x[k] = <a class="code" href="classBox.html#d575af2ca5351d88bbf1905c01e1776b">Xmax</a>[k]-<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;r;
<a name="l00289"></a>00289     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;v[k] = -<a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;v[k]*(1-<a class="code" href="classBoxBase.html#476fc3f769b3a4d04ac8aed5b16bcaa2">friction</a>);
<a name="l00290"></a>00290       }
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <span class="keywordflow">if</span> (<a class="code" href="classBoxBase.html#64d261e12d2cecf942a718daba72ef39">gravity</a>) <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;v[1] -= <a class="code" href="classBoxBase.html#64d261e12d2cecf942a718daba72ef39">gravity</a>*dt;
<a name="l00294"></a>00294     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;step(dt);
<a name="l00295"></a>00295   }
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt;
<a name="l00299"></a><a class="code" href="classBox.html#06ba4612f475637b3c9680e432ed492d">00299</a>   Vec&lt;D&gt; <a class="code" href="classBox.html#06ba4612f475637b3c9680e432ed492d">Box&lt;D&gt;::project</a> (<span class="keywordtype">unsigned</span> d,
<a name="l00300"></a>00300                   <span class="keyword">const</span> Vec&lt;D&gt; &amp;X, <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;r,
<a name="l00301"></a>00301                   Vec&lt;D&gt; &amp;Xproj, <span class="keywordtype">double</span> &amp;rproj) {
<a name="l00302"></a>00302   <span class="keywordflow">if</span> (d &gt; 3) {
<a name="l00303"></a>00303     Vec&lt;D&gt; Xtrans = <a class="code" href="classBox.html#cf91db4d9fe026bed099e7f803ec01c9">R</a>*X;
<a name="l00304"></a>00304     <span class="keywordtype">double</span> projectionfactor = -<a class="code" href="classBox.html#58f335bb3f51a5467f9367ddde445615">Xcam</a>[d-1]/(Xtrans[d-1]-<a class="code" href="classBox.html#58f335bb3f51a5467f9367ddde445615">Xcam</a>[d-1]);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; d-1; i++)
<a name="l00307"></a>00307       Xproj[i]=Xtrans[i]*projectionfactor;
<a name="l00308"></a>00308     rproj = r*projectionfactor;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     Xproj[d-1] = rproj; <span class="comment">//  pack radius into the unused component, just in case</span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="keywordflow">return</span> <a class="code" href="classBox.html#06ba4612f475637b3c9680e432ed492d">project</a> (d-1, Xproj, rproj, Xproj, rproj);
<a name="l00313"></a>00313   }
<a name="l00314"></a>00314   <span class="keywordflow">else</span> <span class="keywordflow">return</span> X;
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="comment">//  DefineHypercube ()</span>
<a name="l00319"></a>00319 <span class="comment">//  creates an array of vectors which contain the edges of a hypercube of</span>
<a name="l00320"></a>00320 <span class="comment">//  dimension num_dimensions in an ordered way</span>
<a name="l00321"></a><a class="code" href="classBox.html#1dd3c5bd4be122b210b4566b77d5ebd6">00321</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#1dd3c5bd4be122b210b4566b77d5ebd6">Box&lt;D&gt;::DefineHypercube</a> () {
<a name="l00322"></a>00322   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 1&lt;&lt;D; i++)
<a name="l00323"></a>00323     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; D; j++)
<a name="l00324"></a>00324       <a class="code" href="classBox.html#13c56822784393dd9804e94f2017e348">vertices</a>[i][j] = i&amp;(1&lt;&lt;j)? 1.0: -1.0;
<a name="l00325"></a>00325 }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="preprocessor">#include &lt;GL/gl.h&gt;</span>
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="classBox.html#ff832bd372698073893d1ea171ff70b9">00330</a> <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="classBox.html#ff832bd372698073893d1ea171ff70b9">Box&lt;D&gt;::draw</a> () {
<a name="l00331"></a>00331   glPushMatrix();
<a name="l00332"></a>00332   glTranslatef( 0.,0.,0. );
<a name="l00333"></a>00333   glScalef( 1.,1.,1. );
<a name="l00334"></a>00334   glMaterial (1.0,0.9,1.0);
<a name="l00335"></a>00335   <span class="comment">//  glLineWidth( 2.0 );</span>
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keywordflow">if</span> (D &lt; 4)
<a name="l00338"></a>00338     DrawHypercube (D, <a class="code" href="classBox.html#13c56822784393dd9804e94f2017e348">vertices</a>);
<a name="l00339"></a>00339   <span class="keywordflow">else</span> {
<a name="l00340"></a>00340     <a class="code" href="classBox.html#cbba9e3f29c76d958e0a42326fdf6d26">rotate</a> (<a class="code" href="classBox.html#5767c2d1852c9a743c9db6d605e7646e">vtrans</a>);
<a name="l00341"></a>00341     <span class="keyword">static</span> <span class="keywordtype">double</span> dummy;
<a name="l00342"></a>00342     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; (1 &lt;&lt; D); i++)
<a name="l00343"></a>00343       <a class="code" href="classBox.html#06ba4612f475637b3c9680e432ed492d">project</a> (D, <a class="code" href="classBox.html#13c56822784393dd9804e94f2017e348">vertices</a>[i], 1., <a class="code" href="classBox.html#5767c2d1852c9a743c9db6d605e7646e">vtrans</a>[i], dummy);
<a name="l00344"></a>00344     DrawHypercube (D, <a class="code" href="classBox.html#5767c2d1852c9a743c9db6d605e7646e">vtrans</a>);
<a name="l00345"></a>00345   }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347   glPopMatrix();
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>.<a class="codeRef" doxygen="libstdc++.tag:" href="a01419.html#cfe97b143edc1c10b4532ebdb839d83c">size</a>(); i++) {
<a name="l00350"></a>00350     <a class="code" href="classBox.html#745dc901ac28b0f7b087bf7f0c1be2d2">balls</a>[i]-&gt;draw();
<a name="l00351"></a>00351   }
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="preprocessor">#endif</span>
</pre></div></div>
        <hr size="1">
        <address style="text-align: right;">
            <small>
                Generated on Sat Nov 8 14:17:16 2008 for HyperspaceExplorer 0.6.2
                by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a>
                1.5.6
                &nbsp;-&nbsp;
                Hosted by<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=34073&amp;type=5" width="210" height="62" border="0" align="middle" alt="SourceForge.net Logo" /></a>
            </small>
        </address>
    </body>
</html>
